!function(){"use strict";angular.module("ipListApp",["ngMaterial","ngResource","ngAnimate","ngCookies","ngSanitize","ui.router"]).config(["$compileProvider","$mdThemingProvider","$mdIconProvider",function(e,t,i){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|chrome-extension):/),e.debugInfoEnabled(!1);var n=t.extendPalette("light-blue",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"ffffff"});t.definePalette("customBlue",n),t.theme("default").primaryPalette("customBlue",{"default":"500","hue-1":"50"}).accentPalette("pink"),t.theme("input","default").primaryPalette("grey"),i.icon("PC","images/laptop117.svg").icon("Printer","images/printer88.svg").icon("HMI","images/device124.svg").icon("PLC","images/settings48.svg").icon("Switch","images/settings48.svg").icon("Device","images/settings48.svg")}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"ctrl"}).state("search",{url:"/search/:searchQuery",templateUrl:"app/search/search-results.html",controller:"SearchController",controllerAs:"ctrl"}).state("group",{url:"/group/:id",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"ctrl"}).state("device",{url:"/group/:id/device/:deviceId",templateUrl:"app/devices/device-details.html",controller:"DeviceController",controllerAs:"ctrl"}),t.otherwise("/")}])}(),function(){"use strict";angular.module("ipListApp").run(["$rootScope","$state",function(e,t){function i(e){"/"===t.previous.url||"^"===t.previous.url?(e.preventDefault(),navigator.app.exitApp()):"undefined"!=typeof navigator.app?navigator.app.backHistory():window.history.back()}function n(){e.$emit("Resumed")}e.$on("$stateChangeSuccess",function(e,i,n,o){t.previous=o}),e.backFunction=i,document.addEventListener("deviceready",function(){document.addEventListener("resume",n,!1),document.addEventListener("backbutton",i,!1),window.addEventListener("statusTap",function(){e.$emit("NavClicked")})})}])}(),function(){"use strict";angular.module("ipListApp").controller("GlobalCtrl",["$scope","$rootScope","$mdSidenav","$mdToast","$mdDialog","$state","$window",function(e,t,i,n,o,a,l){t.$on("$stateChangeStart",function(t,i,n,o,a){switch(i.name){case"device":e.showDevice=!0,e.showMainToolbar=!1,e.showSearchResults=!1;break;case"search":e.showSearchResults=!0,e.showDevice=!1,e.showMainToolbar=!1;break;case"group":e.showMainToolbar=!0,e.showSearchResults=!1,e.showDevice=!1}}),e.goBack=function(){r()},e.showGroupDetails=function(){e.$broadcast("ShowGroupDetails")},e.deleteDevice=function(t){e.$broadcast("DeleteDevice",t)},e.CurrentGroup={name:"",id:""},e.$on("GroupChanged",function(t,i){e.CurrentGroup=i}),e.$on("refreshSidebar",function(t,i){e.$broadcast("doRefreshSidebar")}),e.navigateTo=function(t,i){a.go(t,{id:i}),e.closeSideNav()},e.searchModel={searchActive:!1,searchQuery:null},e.clickNav=function(){t.$emit("NavClicked")},e.closeSideNav=function(){i("left").close().then(function(){})},e.handleHamburger=function(){e.toggleSideNav()},e.openSidenav=function(){n.hide(),i("left").open().then(function(){})},e.keyPress=function(t){13===t&&e.executeSearch()},e.executeSearch=function(){a.go("search",{searchQuery:e.searchModel.searchQuery}),e.searchModel.searchActive=!1,e.searchModel.searchQuery=null},e.disableSearch=function(){e.searchModel.searchActive=!1,e.searchModel.searchQuery=null,e.showMainToolbar=!0},e.closeSideNav=function(){i("left").close().then(function(){})},e.handleHamburger=function(){e.toggleSideNav()},e.$on("NavClicked",function(){var e=document.getElementById("scrollcontainer");e.style.overflow="hidden",e.style.overflow=""}),e.showSearch=function(){e.searchModel.searchActive=!0,e.showMainToolbar=!1},e.toggleSearch=function(){e.searchModel.searchActive?e.disableSearch():e.showSearch()},e.showAlertToast=function(e){var t=n.simple().content(e).highlightAction(!1).position("bottom right").hideDelay(2e3);n.show(t)},e.showAlertToastPersistent=function(e){var t=n.simple().content(e).highlightAction(!1).position("bottom right").hideDelay(0);n.show(t)},e.showUndoToast=function(e,t){var i=n.simple().content(e).action("undo").highlightAction(!1).position("bottom right").hideDelay(2e3);n.show(i).then(function(){t(!0)})},e.showUndoToastPersistent=function(e,t){var i=n.simple().content(e).action("undo").highlightAction(!1).position("bottom right").hideDelay(0);n.show(i).then(function(){t(!0)})},e.showAlertDialog=function(e,t,i){console.log(i),o.show(o.alert().title(e).content(t).ariaLabel("A modal dialog box: "+t).ok("close"))};var r=function(){l.history.back()}}])}(),function(){"use strict";function e(e){var t="http://iplistapi-bgauvey.rhcloud.com/";return{groups:e(t+"api/groups/:id",{id:"@_id"},{update:{method:"PUT"}}),devices:e(t+"api/groups/:id/devices/:deviceId",{id:"@_id",deviceId:"@deviceId"},{update:{method:"PUT"}}),search:e(t+"api/search/:searchQuery",{searchQuery:"@searchQuery"})}}angular.module("ipListApp").factory("$list",["$resource",e])}(),function(){"use strict";function e(e,t,i){function n(t){e.hide(t)}var o=this;o.group={},o.cancel=e.cancel,o.create=function(){t.groups.save(o.group,n)}}angular.module("ipListApp").controller("AddGroupController",e),e.$inject=["$mdDialog","$list","$scope"]}(),function(){"use strict";function e(e,t,i,n,o){function a(e){n.error=e}function l(){t.hide(),o.go("home")}var r=this;r.no=t.cancel,r.yes=function(){i.groups["delete"]({id:e},l,a)}}angular.module("ipListApp").controller("DeleteGroupController",e),e.$inject=["id","$mdDialog","$list","$scope","$state"]}(),function(){"use strict";function e(e,t,i){function n(t){e.hide(t)}var o=this;o.device={},o.cancel=e.cancel,o.update=function(){var e={name:o.device.device,color:""};switch(o.device.device){case"PLC":e.color="#777";break;case"HMI":e.color="#A00";break;case"PC":e.color="#0C2EFF";break;case"Printer":e.color="#F06";break;case"Switch":e.color="#90C"}o.device.icon=e,t.devices.save({id:i._id},o.device,n)},o.deviceTypes=["PLC","HMI","Printer","PC","Switch","Device"]}angular.module("ipListApp").controller("AddDeviceController",e),e.$inject=["$mdDialog","$list","group"]}(),function(){"use strict";function e(e,t,i,n,o){function a(t){var n=i.confirm().title("Would you like to delete this device?").textContent("This action is not reversable.").ariaLabel("Delete device.").targetEvent(t).ok("Delete").cancel("Cancel");i.show(n).then(function(){e.devices.remove({id:s.device.groupId,deviceId:s.device._id},l,r).$promise})}function l(){n.go("group",{id:s.device.groupId})}function r(e){console.error(e)}function d(e){s.device=e}function c(){return e.devices.get({id:t.id,deviceId:t.deviceId},d,r).$promise}var s=this;s.device={},s.update=function(){var t={name:s.device.device,color:""};switch(s.device.device){case"PLC":t.color="#777";break;case"HMI":t.color="#A00";break;case"PC":t.color="#0C2EFF";break;case"Printer":t.color="#F06";break;case"Switch":t.color="#90C";break;case"Device":t.color="#A3006F"}s.device.icon=t,e.devices.update({id:s.device.groupId,deviceId:s.device._id},s.device,function(){n.go("group",{id:s.device.groupId})},r).$promise},o.$on("DeleteDevice",function(e){a(e)}),s.deviceTypes=["PLC","HMI","Printer","PC","Switch","Device"],s.cancel=function(){n.go("group",{id:s.device.groupId})},c()}angular.module("ipListApp").controller("DeviceController",e),e.$inject=["$list","$stateParams","$mdDialog","$state","$scope"]}(),function(){"use strict";function e(e,t,i,n,o,a,l,r,d){function c(){return console.info("refresh requested."),e.groups.get({id:a.id},m).$promise}function s(){var t=a.id;"undefined"==typeof t?e.groups.query(m).$promise:e.groups.get({id:t},m).$promise}function m(e){if(angular.isArray(e)){var t=d("orderBy")(e,"name");t.length>0&&r.go("group",{id:t[0]._id})}else o.$emit("GroupChanged",{name:e.name,id:a.id}),o.Group=e,o.devices=e.devices;mRefresh.resolve()}function u(e){function t(e,t,i,o){function a(){o.$emit("refreshSidebar")}var l=this;l.group=n,l.cancel=function(){e.hide()},l.save=function(){e.hide()},l["delete"]=function(n){var o=t.confirm().title("Would you like to delete this folder?").textContent("This action is not reversable. All contents of this folder will be removed.").ariaLabel("Delete device.").targetEvent(n).ok("Delete").cancel("Cancel");t.show(o).then(function(){e.hide(),i.groups.remove({id:l.group._id},a).$promise})}}var n=o.Group;return i.show({parent:angular.element(document.getElementById("content")),templateUrl:"app/groups/group-details-sheet.html",controller:["$mdBottomSheet","$mdDialog","$list","$scope",t],controllerAs:"cp",bindToController:!0,targetEvent:e})}o.devices=[],o.showGroupDetails=u,o.selected=[],o.Group=[],o.$on("ShowGroupDetails",function(e){u(e)}),o.showDetails=function(e,t){o.$emit("showDeviceToolbar"),r.go("device",{id:e,deviceId:t})},o.addDevice=function(e){n.show({clickOutsideToClose:!0,controller:"AddDeviceController",controllerAs:"ctrl",focusOnOpen:!1,targetEvent:e,locals:{group:o.Group},templateUrl:"app/devices/add-device-dialog.html"}).then(s)},o.addGroup=function(e){n.show({clickOutsideToClose:!0,controller:"AddGroupController",controllerAs:"ctrl",focusOnOpen:!1,targetEvent:e,locals:{group:{}},templateUrl:"app/groups/add-group-dialog.html"}).then(o.$emit("refreshSidebar"))},s(),o.$watch("devices",function(e){mRefresh({nav:"#navMain",scrollEl:"#contentMain",onBegin:c})})}angular.module("ipListApp").controller("HomeController",e),e.$inject=["$list","$mdSidenav","$mdBottomSheet","$mdDialog","$scope","$stateParams","$rootScope","$state","$filter"]}(),function(){"use strict";function e(e,t,i){function n(e){t.groups=i("orderBy")(e,"name")}function o(){t.deferred=t.onChange()}t.groups=[],t.onChange=function(){e.groups.query(n).$promise},o(),t.$on("doRefreshSidebar",function(){o()})}angular.module("ipListApp").controller("SidebarController",e),e.$inject=["$list","$scope","$filter"]}(),function(){"use strict";function e(e,t,i,n){function o(){e.search.query({searchQuery:t.searchQuery},l,a)}function a(e){r.errorText=e}function l(e){r.searchResults=e}var r=this;r.errorText={},r.searchResults=[],r.showDetails=function(e,t){console.log(e),console.log(t),n.go("device",{id:e,deviceId:t})},o()}angular.module("ipListApp").controller("SearchController",e),e.$inject=["$list","$stateParams","$scope","$state"]}(),angular.module("ipListApp").run(["$templateCache",function(e){e.put("app/groups/add-group-dialog.html",'<md-dialog class=md-padding><md-dialog-content><md-title>Add Group</md-title><p ng-if="groupForm.$submitted && groupForm.$invalid" class=md-warn layout=row layout-align="start center"><md-icon>error_outline</md-icon><span>&nbsp; Required fields are missing.</span></p><form name=groupForm ng-submit=ctrl.create()><div layout=row class=input-row><md-input-container flex><label>Name</label> <input name=name ng-model=ctrl.group.name required></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Range</label> <input name=range ng-model=ctrl.group.ip_info.range required></md-input-container><md-input-container flex><label>Subnet</label> <input name=subnet ng-model=ctrl.group.ip_info.subnet required></md-input-container><md-input-container flex><label>Gateway</label> <input name=gateway ng-model=ctrl.group.ip_info.gateway required></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Primary DNS</label> <input name=dns ng-model=ctrl.group.ip_info.dns required></md-input-container><md-input-container flex><label>Secondary DNS</label> <input name=dns2 ng-model=ctrl.group.ip_info.dns2></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Notes</label> <input name=notes ng-model=ctrl.group.notes></md-input-container></div></form></md-dialog-content><div class=md-actions><md-button class=md-primary ng-click=ctrl.create() ng-disabled=groupForm.$invalid>Save</md-button><md-button class=md-primary ng-click=ctrl.cancel()>Cancel</md-button></div></md-dialog>'),e.put("app/groups/group-details-sheet.html",'<md-bottom-sheet class="md-list md-has-header"><md-subheader><span class=name>{{ cp.group.name }}</span></md-subheader><p ng-if="item.form.$submitted && item.form.$invalid" class=md-warn layout=row layout-align="start center"><md-icon>error_outline</md-icon><span>&nbsp; All fields are required.</span></p><form name=item.form ng-submit=cp.update()><div layout=row class=input-row><md-input-container flex><label>Range</label> <input name=range ng-model=cp.group.ip_info.range></md-input-container><md-input-container flex><label>Subnet</label> <input name=subnet ng-model=cp.group.ip_info.subnet></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Gateway</label> <input name=gateway ng-model=cp.group.ip_info.gateway></md-input-container><md-input-container flex><label>Primary DNS</label> <input name=dns ng-model=cp.group.ip_info.dns></md-input-container><md-input-container flex><label>Secondary DNS</label> <input name=subnet ng-model=cp.group.ip_info.dns2></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Notes</label> <input name=notes ng-model=cp.group.notes></md-input-container></div></form><div class=md-actions><md-button class="md-warn md-hue-2" ng-click=cp.delete()>Delete</md-button><md-button class=md-primary ng-click=cp.save() ng-disabled=item.form.$invalid>Save</md-button><md-button class=md-primary ng-click=cp.cancel()>Cancel</md-button></div></md-bottom-sheet>'),e.put("app/devices/add-device-dialog.html",'<md-dialog class=md-padding><md-dialog-content><md-title>Add Device</md-title><p ng-if="form.$submitted && form.$invalid" class=md-warn layout=row layout-align="start center"><md-icon>error_outline</md-icon><span>&nbsp; Required fields are missing.</span></p><form name=form ng-submit=ctrl.addItem()><div layout=row class=input-row><md-input-container flex><label>Location</label> <input name=location ng-model=ctrl.device.location required></md-input-container><md-input-container flex><label>Device Type</label><md-select required ng-model=ctrl.device.device><md-option ng-value=opt ng-repeat="opt in ctrl.deviceTypes">{{ opt }}</md-option></md-select></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Name</label> <input name=pc_name ng-model=ctrl.device.pc_name></md-input-container><md-input-container flex><label>IP Address</label> <input name=ip_address ng-model=ctrl.device.ip_address required></md-input-container><md-input-container flex><label>MAC Address</label> <input name=mac_address ng-model=ctrl.device.mac_address></md-input-container></div><md-subheader>Miscellaneous</md-subheader><div layout=row class=input-row><md-input-container flex><label>Port Type</label> <input name=port_type ng-model=ctrl.device.port_type></md-input-container><md-input-container flex><label>Port</label> <input name=port ng-model=ctrl.device.port></md-input-container><md-input-container flex><label>MES Entity ID</label> <input name=ent_id type=number min=0 max=9999 ng-model=ctrl.device.ent_id></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>PLC Type</label> <input name=plc_type ng-model=ctrl.device.plc_type></md-input-container><md-input-container flex><label>Firmware</label> <input name=plc_firmware ng-model=ctrl.device.firmware></md-input-container></div></form></md-dialog-content><div class=md-actions><md-button class=md-primary ng-click=ctrl.update() ng-disabled=form.$invalid>Save</md-button><md-button class=md-primary ng-click=ctrl.cancel()>Cancel</md-button></div></md-dialog>'),e.put("app/devices/device-details.html",'<div><p ng-if="form.$submitted && form.$invalid" class=md-warn layout=row layout-align="start center"><md-icon>error_outline</md-icon><span>&nbsp; Required fields are missing.</span></p><form name=form ng-submit=ctrl.update()><div layout=row class=input-row><md-input-container flex><label>Location</label> <input name=location ng-model=ctrl.device.location required></md-input-container><md-input-container flex><label>Device Type</label><md-select required ng-model=ctrl.device.device><md-option ng-value=opt ng-repeat="opt in ctrl.deviceTypes">{{ opt }}</md-option></md-select></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Name</label> <input name=pc_name ng-model=ctrl.device.pc_name></md-input-container><md-input-container flex><label>IP Address</label> <input name=ip_address ng-model=ctrl.device.ip_address required></md-input-container><md-input-container flex><label>MAC Address</label> <input name=mac_address ng-model=ctrl.device.mac_address></md-input-container></div><md-subheader>Miscellaneous</md-subheader><div layout=row class=input-row><md-input-container flex><label>Port Type</label> <input name=port_type ng-model=ctrl.device.port_type></md-input-container><md-input-container flex><label>Port</label> <input name=port ng-model=ctrl.device.port></md-input-container><md-input-container flex><label>MES Entity ID</label> <input name=ent_id type=number min=0 max=9999 ng-model=ctrl.device.ent_id></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>PLC Type</label> <input name=plc_type ng-model=ctrl.device.plc_type></md-input-container><md-input-container flex><label>Firmware</label> <input name=plc_firmware ng-model=ctrl.device.firmware></md-input-container></div></form><div class=md-actions><md-button class=md-primary ng-click=ctrl.update() ng-disabled=form.$invalid>Save</md-button><md-button class=md-primary ng-click=ctrl.cancel()>Cancel</md-button></div></div>'),e.put("app/home/home.html",'<md-list><md-list-item ng-repeat="device in devices" class="md-3-line md-whiteframe-z1" ng-click=showDetails(device.groupId,device._id)><div layout=row flex><md-icon layout=column layout-align="start end" ng-style="{color: device.icon.color }" md-svg-icon="{{ device.icon.name }}" aria-label="{{ device.icon.name }}"></md-icon><div class="md-list-item-text md-padding"><h4>{{ device.device }}</h4><div ng-switch="device.pc_name || \'_undefined_\'"><h3 ng-switch-when=_undefined_>{{ device.location }}</h3><h3 ng-switch-default>{{ device.pc_name }}</h3></div><p>{{ device.ip_address }}</p></div></div></md-list-item></md-list><md-fab-speed-dial md-direction=up class="md-fab-bottom-right md-fling"><md-fab-trigger><md-button aria-label=Add... class="md-fab md-primary md-hue-2"><md-icon>add</md-icon></md-button></md-fab-trigger><md-fab-actions><md-button class="md-fab md-raised md-mini md-primary md-hue-3" ng-click=addDevice($event) aria-label="Add Device"><md-icon>computer</md-icon></md-button><md-button class="md-fab md-raised md-mini md-primary md-hue-3" ng-click=addGroup($event) aria-label="Add Group"><md-icon>folder</md-icon></md-button></md-fab-actions></md-fab-speed-dial>'),e.put("app/home/sidebar.html",'<section layout=row flex><md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id=left md-is-locked-open="$mdMedia(\'gt-md\')"><md-toolbar class=md-hue-2><span flex></span><div layout=column class="md-toolbar-tools-bottom inset"><div>Folders</div></div></md-toolbar><md-content layout-padding ng-controller=SidebarController><md-list><md-list-item ng-repeat="group in groups" ng-click="navigateTo(\'group\', group._id )"><p>{{group.name}}</p></md-list-item><md-divider></md-divider><md-list-item ng-click=showSettings()><md-item-content md-ink-ripple layout=row layout-align="start center"><div class=inset><md-icon class=md-dark>settings</md-icon></div><div class=inset>Settings</div></md-item-content></md-list-item></md-list></md-content></md-sidenav></section>'),e.put("app/home/toolbar.html",'<md-toolbar id=navMain ng-show=showMainToolbar flex class="md-primary animate-show md-whiteframe-z1" ng-click=clickNav()><div class=md-toolbar-tools><md-button ng-click=openSidenav() class=md-icon-button hide-gt-md aria-label=Menu><md-icon>menu</md-icon></md-button><h2>{{CurrentGroup.name}}</h2><span flex></span><md-button aria-label=Search class=md-icon-button ng-click=toggleSearch()><md-icon>search<md-icon></md-icon></md-icon></md-button><md-button class=md-icon-button ng-click=showGroupDetails()><md-icon md-menu-origin>more_vert</md-icon></md-button></div></md-toolbar><md-toolbar ng-show=showDevice flex class="md-primary animate-show md-whiteframe-z1" ng-click=clickNav()><div class=md-toolbar-tools><md-button ng-click=goBack() class=md-icon-button hide-gt-md aria-label=Back><md-icon>arrow_back</md-icon></md-button><span flex></span><md-button ng-click=deleteDevice() class="md-icon-button md-warn" aria-label="Delete Device"><md-icon>delete</md-icon></md-button></div></md-toolbar><md-toolbar flex ng-show=searchModel.searchActive class="animate-show md-hue-1 md-whiteframe-z1"><div class=md-toolbar-tools><md-button class=md-icon-button ng-click=toggleSearch() aria-label=Back><md-icon>arrow_back</md-icon></md-button><md-input-container md-theme=input flex><label>&nbsp;</label> <input ng-model=searchModel.searchQuery placeholder="Search Devices" ng-keyup=keyPress($event.keyCode)></md-input-container></div></md-toolbar><md-toolbar ng-show=showSearchResults flex class="md-primary animate-show md-whiteframe-z1" ng-click=clickNav()><div class=md-toolbar-tools><md-button ng-click=goBack() class=md-icon-button hide-gt-md aria-label=Back><md-icon>arrow_back</md-icon></md-button><span flex></span></div></md-toolbar>'),e.put("app/search/search-results.html",'<md-list><md-subheader class=md-no-sticky><div layout=row layout-align="space-between start"><span>Results</span> <span>{{ ctrl.searchResults.length }}</span></div></md-subheader><md-list-item ng-repeat="device in ctrl.searchResults" class=md-3-line ng-click=ctrl.showDetails(device.groupId,device._id)><div layout=row flex class=md-whiteframe-z2 style=padding-left:10px><md-icon layout=column layout-align="start end" ng-style="{ color: device.icon.color }" md-svg-icon="{{ device.icon.name }}" aria-label="{{ device.icon.name }}"></md-icon><div class="md-list-item-text md-padding"><h4>{{ device.device }}</h4><h3>{{ device.location }}</h3><p>{{ device.ip_address }}</p></div></div></md-list-item></md-list>')}]);