!function(){"use strict";angular.module("ipListApp",["ngMaterial","ngResource","ngAnimate","ngCookies","ngSanitize","ngTouch","ui.router","infomofo.angularMdPullToRefresh"]).config(["$compileProvider","$mdThemingProvider","$mdIconProvider",function(e,t,n){e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|file|chrome-extension):/),e.debugInfoEnabled(!1);var i=t.extendPalette("light-blue",{contrastDefaultColor:"light",contrastDarkColors:["50"],50:"ffffff"});t.definePalette("customBlue",i),t.theme("default").primaryPalette("customBlue",{"default":"500","hue-1":"50"}).accentPalette("pink"),t.theme("input","default").primaryPalette("grey"),n.icon("PC","images/laptop117.svg").icon("Printer","images/printer88.svg").icon("HMI","images/device124.svg").icon("PLC","images/settings48.svg").icon("Switch","images/settings48.svg").icon("Device","images/settings48.svg")}]).config(["$stateProvider","$urlRouterProvider",function(e,t){e.state("home",{url:"/",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"ctrl"}).state("search",{url:"/search/:searchQuery",templateUrl:"app/search/search-results.html",controller:"SearchController",controllerAs:"ctrl"}).state("group",{url:"/group/:id",templateUrl:"app/home/home.html",controller:"HomeController",controllerAs:"ctrl"}).state("device",{url:"/group/:id/device/:deviceId",templateUrl:"app/devices/device-details.html",controller:"DeviceController",controllerAs:"ctrl"}),t.otherwise("/")}])}(),function(){"use strict";angular.module("ipListApp").run(["$rootScope","$state",function(e,t){function n(e){"/"===t.previous.url||"^"===t.previous.url?(e.preventDefault(),navigator.app.exitApp()):"undefined"!=typeof navigator.app?navigator.app.backHistory():window.history.back()}function i(){e.$emit("Resumed")}e.$on("$stateChangeSuccess",function(e,n,i,o){t.previous=o}),e.backFunction=n,document.addEventListener("deviceready",function(){document.addEventListener("resume",i,!1),document.addEventListener("backbutton",n,!1),window.addEventListener("statusTap",function(){e.$emit("NavClicked")})})}])}(),function(){"use strict";angular.module("ipListApp").controller("GlobalCtrl",["$scope","$rootScope","$mdSidenav","$mdToast","$mdDialog","$state","$window",function(e,t,n,i,o,a,l){e.showDevice=!1,e.showSearchResults=!1,e.showMainToolbar=!0,t.$on("$stateChangeStart",function(t,n,i,o,a){switch(n.name){case"device":e.showDevice=!0,e.showMainToolbar=!1,e.showSearchResults=!1;break;case"search":e.showSearchResults=!0,e.showDevice=!1,e.showMainToolbar=!1;break;case"group":e.showMainToolbar=!0,e.showSearchResults=!1,e.showDevice=!1}}),e.goBack=function(){d()},e.showGroupDetails=function(t){e.$broadcast("ShowGroupDetails")},e.CurrentGroup={name:""},e.$on("GroupChanged",function(t,n){e.CurrentGroup=n}),e.$on("refreshSidebar",function(t,n){e.$broadcast("doRefreshSidebar")}),e.navigateTo=function(t,n){a.go(t,{id:n}),e.closeSideNav()},e.searchModel={searchActive:!1,searchQuery:null},e.clickNav=function(){t.$emit("NavClicked")},e.closeSideNav=function(){n("left").close().then(function(){})},e.handleHamburger=function(){e.toggleSideNav()},e.openSidenav=function(){i.hide(),n("left").open().then(function(){})},e.keyPress=function(t){13===t&&e.executeSearch()},e.executeSearch=function(){var n="/search/"+e.searchModel.searchQuery;console.debug("go to path "+n),a.go("search",{searchQuery:e.searchModel.searchQuery}),e.disableSearch(),t.go(n)},e.disableSearch=function(){e.searchModel.searchActive=!1,e.searchModel.searchQuery=null,e.showMainToolbar=!0},e.closeSideNav=function(){n("left").close().then(function(){})},e.handleHamburger=function(){e.toggleSideNav()},e.$on("NavClicked",function(){var e=document.getElementById("scrollcontainer");e.style.overflow="hidden",e.style.overflow=""}),e.showSearch=function(){e.searchModel.searchActive=!0,e.showMainToolbar=!1},e.toggleSearch=function(){e.searchModel.searchActive?e.disableSearch():e.showSearch()},e.showAlertToast=function(e){var t=i.simple().content(e).highlightAction(!1).position("bottom right").hideDelay(2e3);i.show(t)},e.showAlertToastPersistent=function(e){var t=i.simple().content(e).highlightAction(!1).position("bottom right").hideDelay(0);i.show(t)},e.showUndoToast=function(e,t){var n=i.simple().content(e).action("undo").highlightAction(!1).position("bottom right").hideDelay(2e3);i.show(n).then(function(){t(!0)})},e.showUndoToastPersistent=function(e,t){var n=i.simple().content(e).action("undo").highlightAction(!1).position("bottom right").hideDelay(0);i.show(n).then(function(){t(!0)})},e.showAlertDialog=function(e,t,n){console.log(n),o.show(o.alert().title(e).content(t).ariaLabel("A modal dialog box: "+t).ok("close"))};var d=function(){l.history.back()}}])}(),function(){"use strict";function e(e){var t="http://iplistapi-bgauvey.rhcloud.com/";return{groups:e(t+"api/groups/:id",{id:"@_id"},{update:{method:"PUT"}}),devices:e(t+"api/groups/:id/devices/:deviceId",{id:"@_id",deviceId:"@deviceId"},{update:{method:"PUT"}})}}angular.module("ipListApp").factory("$list",["$resource",e])}(),function(){"use strict";function e(e,t,n){function i(t){e.hide(t)}var o=this;o.device={},o.cancel=e.cancel,o.update=function(){var e={name:o.device.device,color:""};switch(o.device.device){case"PLC":e.color="#777";break;case"HMI":e.color="#A00";break;case"PC":e.color="#0C2EFF";break;case"Printer":e.color="#F06";break;case"Switch":e.color="#90C"}o.device.icon=e,t.devices.save({id:n._id},o.device,i)},o.deviceTypes=["PLC","HMI","Printer","PC","Switch","Device"]}angular.module("ipListApp").controller("AddDeviceController",e),e.$inject=["$mdDialog","$list","group"]}(),function(){"use strict";function e(e,t,n,i){function o(){i.go("group",{id:r.device.groupId})}function a(e){console.error(e)}function l(e){r.device=e}function d(){return e.devices.get({id:t.id,deviceId:t.deviceId},l,a).$promise}var r=this;r.device={},r.update=function(){var t={name:r.device.device,color:""};switch(r.device.device){case"PLC":t.color="#777";break;case"HMI":t.color="#A00";break;case"PC":t.color="#0C2EFF";break;case"Printer":t.color="#F06";break;case"Switch":t.color="#90C";break;case"Device":t.color="#A3006F"}r.device.icon=t,e.devices.update({id:r.device.groupId,deviceId:r.device._id},r.device,function(){i.go("group",{id:r.device.groupId})},a).$promise},r["delete"]=function(t){var i=n.confirm().title("Would you like to delete this device?").textContent("This action is not reversable.").ariaLabel("Delete device.").targetEvent(t).ok("Delete").cancel("Cancel");n.show(i).then(function(){e.devices.remove({id:r.device.groupId,deviceId:r.device._id},o,a).$promise})},r.deviceTypes=["PLC","HMI","Printer","PC","Switch","Device"],r.cancel=function(){i.go("group",{id:r.device.groupId})},d()}angular.module("ipListApp").controller("DeviceController",e),e.$inject=["$list","$stateParams","$mdDialog","$state"]}(),function(){"use strict";function e(e,t,n,i,o,a,l,d,r){function c(){var t=a.id;"undefined"==typeof t?e.groups.query(s).$promise:e.groups.get({id:t},s).$promise}function s(e){if(angular.isArray(e)){var t=r("orderBy")(e,"name");t.length>0&&d.go("group",{id:t[0]._id})}else o.$emit("GroupChanged",{name:e.name}),o.Group=e,o.devices=e.devices}function m(e){function t(e,t,n,o){function a(){o.$emit("refreshSidebar")}var l=this;l.group=i,l.cancel=function(){e.hide()},l.save=function(){e.hide()},l["delete"]=function(i){var o=t.confirm().title("Would you like to delete this folder?").textContent("This action is not reversable. All contents of this folder will be removed.").ariaLabel("Delete device.").targetEvent(i).ok("Delete").cancel("Cancel");t.show(o).then(function(){e.hide(),n.groups.remove({id:l.group._id},a).$promise})}}var i=o.Group;return n.show({parent:angular.element(document.getElementById("content")),templateUrl:"app/groups/group-details-sheet.html",controller:["$mdBottomSheet","$mdDialog","$list","$scope",t],controllerAs:"cp",bindToController:!0,targetEvent:e})}o.devices=[],o.showGroupDetails=m,o.selected=[],o.Group=[],o.$on("ShowGroupDetails",function(e){m(e)}),o.showDetails=function(e,t){o.$emit("showDeviceToolbar"),d.go("device",{id:e,deviceId:t})},o.addDevice=function(e){i.show({clickOutsideToClose:!0,controller:"AddDeviceController",controllerAs:"ctrl",focusOnOpen:!1,targetEvent:e,locals:{group:o.Group},templateUrl:"app/devices/add-device-dialog.html"}).then(c)},o.addGroup=function(e){i.show({clickOutsideToClose:!0,controller:"AddGroupController",controllerAs:"ctrl",focusOnOpen:!1,targetEvent:e,locals:{group:{}},templateUrl:"app/groups/add-group-dialog.html"}).then(o.$emit("refreshSidebar"))},o.refreshFunction=function(){return e.groups.get({id:a.id},s).$promise},c()}angular.module("ipListApp").controller("HomeController",e),e.$inject=["$list","$mdSidenav","$mdBottomSheet","$mdDialog","$scope","$stateParams","$rootScope","$state","$filter"]}(),function(){"use strict";function e(e,t,n){function i(e){t.groups=n("orderBy")(e,"name")}function o(){t.deferred=t.onChange()}t.groups=[],t.onChange=function(){e.groups.query(i).$promise},o(),t.$on("doRefreshSidebar",function(){o()})}angular.module("ipListApp").controller("SidebarController",e),e.$inject=["$list","$scope","$filter"]}(),function(){"use strict";function e(e,t,n){function i(t){e.hide(t)}var o=this;o.group={},o.cancel=e.cancel,o.create=function(){t.groups.save(o.group,i)}}angular.module("ipListApp").controller("AddGroupController",e),e.$inject=["$mdDialog","$list","$scope"]}(),function(){"use strict";function e(e,t,n,i,o){function a(e){i.error=e}function l(){t.hide(),o.go("home")}var d=this;d.no=t.cancel,d.yes=function(){n.groups["delete"]({id:e},l,a)}}angular.module("ipListApp").controller("DeleteGroupController",e),e.$inject=["id","$mdDialog","$list","$scope","$state"]}(),function(){"use strict";function e(e,t,n,i){var o=this;o.errorText={},o.searchResults=[],o.showDetails=function(e,t){n.$emit("showDeviceToolbar"),i.go("device",{id:e,deviceId:t})}}angular.module("ipListApp").controller("SearchController",e),e.$inject=["$list","$stateParams","$scope","$state"]}(),angular.module("ipListApp").run(["$templateCache",function(e){e.put("app/devices/add-device-dialog.html",'<md-dialog class=md-padding><md-dialog-content><md-title>Add Device</md-title><p ng-if="form.$submitted && form.$invalid" class=md-warn layout=row layout-align="start center"><md-icon>error_outline</md-icon><span>&nbsp; Required fields are missing.</span></p><form name=form ng-submit=ctrl.addItem()><div layout=row class=input-row><md-input-container flex><label>Location</label> <input name=location ng-model=ctrl.device.location required></md-input-container><md-input-container flex><label>Device Type</label><md-select required ng-model=ctrl.device.device><md-option ng-value=opt ng-repeat="opt in ctrl.deviceTypes">{{ opt }}</md-option></md-select></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Name</label> <input name=pc_name ng-model=ctrl.device.pc_name></md-input-container><md-input-container flex><label>IP Address</label> <input name=ip_address ng-model=ctrl.device.ip_address required></md-input-container><md-input-container flex><label>MAC Address</label> <input name=mac_address ng-model=ctrl.device.mac_address></md-input-container></div><md-subheader>Miscellaneous</md-subheader><div layout=row class=input-row><md-input-container flex><label>Port Type</label> <input name=port_type ng-model=ctrl.device.port_type></md-input-container><md-input-container flex><label>Port</label> <input name=port ng-model=ctrl.device.port></md-input-container><md-input-container flex><label>MES Entity ID</label> <input name=ent_id type=number min=0 max=9999 ng-model=ctrl.device.ent_id></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>PLC Type</label> <input name=plc_type ng-model=ctrl.device.plc_type></md-input-container><md-input-container flex><label>Firmware</label> <input name=plc_firmware ng-model=ctrl.device.firmware></md-input-container></div></form></md-dialog-content><div class=md-actions><md-button class=md-primary ng-click=ctrl.update() ng-disabled=form.$invalid>Save</md-button><md-button class=md-primary ng-click=ctrl.cancel()>Cancel</md-button></div></md-dialog>'),e.put("app/devices/device-details.html",'<div><p ng-if="form.$submitted && form.$invalid" class=md-warn layout=row layout-align="start center"><md-icon>error_outline</md-icon><span>&nbsp; Required fields are missing.</span></p><form name=form ng-submit=ctrl.update()><div layout=row class=input-row><md-input-container flex><label>Location</label> <input name=location ng-model=ctrl.device.location required></md-input-container><md-input-container flex><label>Device Type</label><md-select required ng-model=ctrl.device.device><md-option ng-value=opt ng-repeat="opt in ctrl.deviceTypes">{{ opt }}</md-option></md-select></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Name</label> <input name=pc_name ng-model=ctrl.device.pc_name></md-input-container><md-input-container flex><label>IP Address</label> <input name=ip_address ng-model=ctrl.device.ip_address required></md-input-container><md-input-container flex><label>MAC Address</label> <input name=mac_address ng-model=ctrl.device.mac_address></md-input-container></div><md-subheader>Miscellaneous</md-subheader><div layout=row class=input-row><md-input-container flex><label>Port Type</label> <input name=port_type ng-model=ctrl.device.port_type></md-input-container><md-input-container flex><label>Port</label> <input name=port ng-model=ctrl.device.port></md-input-container><md-input-container flex><label>MES Entity ID</label> <input name=ent_id type=number min=0 max=9999 ng-model=ctrl.device.ent_id></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>PLC Type</label> <input name=plc_type ng-model=ctrl.device.plc_type></md-input-container><md-input-container flex><label>Firmware</label> <input name=plc_firmware ng-model=ctrl.device.firmware></md-input-container></div></form><div class=md-actions><md-button class=md-primary ng-click=ctrl.update() ng-disabled=form.$invalid>Save</md-button><md-button class=md-primary ng-click=ctrl.cancel()>Cancel</md-button><md-button class=md-warn ng-click=ctrl.delete($event)>Remove</md-button></div></div>'),e.put("app/home/home.html",'<md-content im-pull-to-refresh refresh-function=refreshFunction()><md-list><md-list-item ng-repeat="device in devices" class=md-3-line ng-click="showDetails(\'{{device.groupId}}\',\'{{device._id}}\')"><div layout=row flex style=padding-left:10px><md-icon layout=column layout-align="start end" ng-style="{color: device.icon.color }" md-svg-icon="{{ device.icon.name }}" aria-label="{{ device.icon.name }}"></md-icon><div class="md-list-item-text md-padding"><h4>{{ device.device }}</h4><div ng-switch="device.pc_name || \'_undefined_\'"><h3 ng-switch-when=_undefined_>{{ device.location }}</h3><h3 ng-switch-default>{{ device.pc_name }}</h3></div><p>{{ device.ip_address }}</p></div></div></md-list-item></md-list></md-content><md-fab-speed-dial md-direction=up class="md-fab-bottom-right md-fling"><md-fab-trigger><md-button aria-label=Add... class="md-fab md-primary md-hue-2"><md-icon>add</md-icon></md-button></md-fab-trigger><md-fab-actions><md-button class="md-fab md-raised md-mini md-primary md-hue-3" ng-click=addDevice($event) aria-label="Add Device"><md-icon>computer</md-icon></md-button><md-button class="md-fab md-raised md-mini md-primary md-hue-3" ng-click=addGroup($event) aria-label="Add Group"><md-icon>folder</md-icon></md-button></md-fab-actions></md-fab-speed-dial>'),e.put("app/home/sidebar.html",'<section layout=row flex><md-sidenav class="md-sidenav-left md-whiteframe-z2" md-component-id=left md-is-locked-open="$mdMedia(\'gt-md\')"><md-toolbar class=md-hue-2><span flex></span><div layout=column class="md-toolbar-tools-bottom inset"><div>Folders</div></div></md-toolbar><md-content layout-padding ng-controller=SidebarController><md-list><md-list-item ng-repeat="group in groups" ng-click="navigateTo(\'group\', \'{{ group._id }}\')"><p>{{group.name}}</p></md-list-item><md-divider></md-divider><md-list-item ng-click=showSettings()><md-item-content md-ink-ripple layout=row layout-align="start center"><div class=inset><md-icon class=md-dark>settings</md-icon></div><div class=inset>Settings</div></md-item-content></md-list-item></md-list></md-content></md-sidenav></section>'),e.put("app/home/toolbar.html",'<md-toolbar ng-show=showMainToolbar flex class="md-primary animate-show md-whiteframe-z1" ng-click=clickNav()><div class=md-toolbar-tools><md-button ng-click=openSidenav() class=md-icon-button hide-gt-md aria-label=Menu><md-icon>menu</md-icon></md-button><h2>{{CurrentGroup.name}}</h2><span flex></span><md-button aria-label=Search class=md-icon-button ng-click=toggleSearch()><md-icon>search<md-icon></md-icon></md-icon></md-button><md-menu><md-button aria-label="Open group interactions menu" class=md-icon-button ng-click=$mdOpenMenu($event)><md-icon md-menu-origin>more_vert</md-icon></md-button><md-menu-content width=4><md-menu-item><md-button class=md-button ng-click=showGroupDetails($event) aria-label="Group Info"><md-icon>folder</md-icon>Details</md-button></md-menu-item></md-menu-content></md-menu></div></md-toolbar><md-toolbar ng-show=showDevice flex class="md-primary animate-show md-whiteframe-z1" ng-click=clickNav()><div class=md-toolbar-tools><md-button ng-click=goBack() class=md-icon-button hide-gt-md aria-label=Back><md-icon>arrow_back</md-icon></md-button><h2>{{CurrentGroup.name}}</h2><span flex></span></div></md-toolbar><md-toolbar flex ng-show=searchModel.searchActive class="animate-show md-hue-1 md-whiteframe-z1"><div class=md-toolbar-tools><md-button class=md-icon-button ng-click=toggleSearch() aria-label=Back><md-icon>arrow_back</md-icon></md-button><md-input-container md-theme=input flex><label>&nbsp;</label> <input ng-model=searchModel.searchQuery placeholder="Search Devices" ng-keyup=keyPress($event.keyCode)></md-input-container></div></md-toolbar><md-toolbar ng-show=showSearchResults flex class="md-primary animate-show md-whiteframe-z1" ng-click=clickNav()><div class=md-toolbar-tools><md-button ng-click=goBack() class=md-icon-button hide-gt-md aria-label=Back><md-icon>arrow_back</md-icon></md-button><span flex></span></div></md-toolbar>'),e.put("app/groups/add-group-dialog.html",'<md-dialog class=md-padding><md-dialog-content><md-title>Add Group</md-title><p ng-if="groupForm.$submitted && groupForm.$invalid" class=md-warn layout=row layout-align="start center"><md-icon>error_outline</md-icon><span>&nbsp; Required fields are missing.</span></p><form name=groupForm ng-submit=ctrl.create()><div layout=row class=input-row><md-input-container flex><label>Name</label> <input name=name ng-model=ctrl.group.name required></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Range</label> <input name=range ng-model=ctrl.group.ip_info.range required></md-input-container><md-input-container flex><label>Subnet</label> <input name=subnet ng-model=ctrl.group.ip_info.subnet required></md-input-container><md-input-container flex><label>Gateway</label> <input name=gateway ng-model=ctrl.group.ip_info.gateway required></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Primary DNS</label> <input name=dns ng-model=ctrl.group.ip_info.dns required></md-input-container><md-input-container flex><label>Secondary DNS</label> <input name=dns2 ng-model=ctrl.group.ip_info.dns2></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Notes</label> <input name=notes ng-model=ctrl.group.notes></md-input-container></div></form></md-dialog-content><div class=md-actions><md-button class=md-primary ng-click=ctrl.create() ng-disabled=groupForm.$invalid>Save</md-button><md-button class=md-primary ng-click=ctrl.cancel()>Cancel</md-button></div></md-dialog>'),e.put("app/groups/group-details-sheet.html",'<md-bottom-sheet class="md-list md-has-header"><md-subheader><span class=name>{{ cp.group.name }}</span></md-subheader><p ng-if="item.form.$submitted && item.form.$invalid" class=md-warn layout=row layout-align="start center"><md-icon>error_outline</md-icon><span>&nbsp; All fields are required.</span></p><form name=item.form ng-submit=cp.update()><div layout=row class=input-row><md-input-container flex><label>Range</label> <input name=range ng-model=cp.group.ip_info.range></md-input-container><md-input-container flex><label>Subnet</label> <input name=subnet ng-model=cp.group.ip_info.subnet></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Gateway</label> <input name=gateway ng-model=cp.group.ip_info.gateway></md-input-container><md-input-container flex><label>Primary DNS</label> <input name=dns ng-model=cp.group.ip_info.dns></md-input-container><md-input-container flex><label>Secondary DNS</label> <input name=subnet ng-model=cp.group.ip_info.dns2></md-input-container></div><div layout=row class=input-row><md-input-container flex><label>Notes</label> <input name=notes ng-model=cp.group.notes></md-input-container></div></form><div class=md-actions><md-button class="md-warn md-hue-2" ng-click=cp.delete()>Delete</md-button><md-button class=md-primary ng-click=cp.save() ng-disabled=item.form.$invalid>Save</md-button><md-button class=md-primary ng-click=cp.cancel()>Cancel</md-button></div></md-bottom-sheet>'),e.put("app/search/search-results.html",'<md-list><md-subheader class=md-no-sticky><div layout=row layout-align="space-between start"><span>Results</span> <span>{{ ctrl.searchResults.length }}</span></div></md-subheader><md-list-item ng-repeat="device in ctrl.searchResults" class=md-3-line ng-click="ctrl.showDetails(\'{{device.groupId}}\',\'{{device._id}}\')"><div layout=row flex style=padding-left:10px><md-icon layout=column layout-align="start end" ng-style="{ color: device.icon.color }" md-svg-icon="{{ device.icon.name }}" aria-label="{{ device.icon.name }}"></md-icon><div class="md-list-item-text md-padding"><h4>{{ device.device }}</h4><h3>{{ device.location }}</h3><p>{{ device.ip_address }}</p></div></div></md-list-item></md-list>')}]);